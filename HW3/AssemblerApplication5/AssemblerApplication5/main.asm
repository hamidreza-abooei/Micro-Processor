;
; AssemblerApplication5.asm
;
; Created: 3/31/2022 11:03:23 PM
; Author : Hamidreza
;


; Replace with your application code
LDI R16,HIGH(RAMEND)
OUT SPH,R16
LDI R16,LOW(RAMEND)
OUT SPL,R16

LDI R16,0X00
OUT DDRB,R16
LDI R16,0B1000
OUT PORTB,R16
LDI R16,0B01111111
OUT DDRC,R16
LDI R31,0X02
LDI R30,0X40
LPM R20,Z+
OUT PORTC,R20
LDI R17,0X01	;FLAG
LDI R19,0X0A+0X40
LDI R21,0X00
LDI R22,0X00
LDI R23,0B00001000
start:
	IN R18,PINB
	;BRNE click
	CPSE R18,R21
	CALL click
	CPSE R18,R23
	LDI R17,0X00
	;LPM R20,Z+
	

    rjmp start

click:
	;CP LOW(Z),R19
	CPSE R17,R22
	RET
	LDI R17,0X01
	CP R30,R19
	BREQ ZERO
	LPM R20,Z+
	OUT PORTC,R20
	RET

ZERO:
	LDI R30,0X40
	LPM R20,Z+
	OUT PORTC,R20
	RET


	
.ORG 0X120
.DB $C0, $F9
.DB $A4, $B0
.DB	$99, $92
.DB $82, $F8
.DB $80, $90
