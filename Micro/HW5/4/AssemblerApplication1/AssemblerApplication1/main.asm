;
; AssemblerApplication1.asm
;
; Created: 5/7/2022 8:09:55 PM
; Author : Hamidreza
;
.ORG 0X000
	RJMP START
.ORG 0X002
	RJMP INTSUB
; Replace with your application code
START:
	LDI R16,LOW(RAMEND)
	OUT SPL,R16
	LDI R16,HIGH(RAMEND)
	OUT SPH,R16
	SBI DDRD,5

	LDI R16,0B00000100
	OUT PORTD,R16

	;INTERRUPT CONTROL
	LDI R16,0B00000010
	OUT MCUCR,R16
	LDI R16,0B01000000
	OUT GICR,R16


	;LDI R20,0X0F				;RESERVED FOR DUTYCYCLE
	LDI R16,0B10000001
	OUT TCCR1A,R16
	LDI R16,0B00001001
	OUT TCCR1B,R16
	LDI R16,0X00
	OUT OCR1AH,R16
	LDI R16,0X50
	OUT OCR1AL,R16
	SEI
	
HERE: 
    RJMP HERE

INTSUB:

	IN R16,OCR1AL
	;IN R17,OCR1AH
	;LDI R22,0X00
	LDI R21,0X0F
	ADD R16,R21
	;ADC R17,R22
	;OUT OCR1AH,R17
	OUT OCR1AL,R16
	RETI